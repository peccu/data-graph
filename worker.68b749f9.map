{"version":3,"sources":["js/worker.js"],"names":["importScripts","fsOptions","fs","options","BrowserFS","configure","err","console","log","portal","MagicPortal","self","BFSRequire","set","pify","git","plugins","get","emitter","credentialManager","getRootFS","empty","mkdir","addEventListener","data"],"mappings":"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","file":"worker.68b749f9.map","sourceRoot":"..","sourcesContent":["importScripts(\n  'https://isomorphic-git.org/js/browserfs.js',\n  'https://isomorphic-git.org/js/pify.js',\n  'https://unpkg.com/isomorphic-git',\n  'https://unpkg.com/magic-portal'\n);\nlet fsOptions = {\n  fs: 'IndexedDB',\n  options: {}\n};\n\nBrowserFS.configure(fsOptions, async function(err) {\n  if (err) return console.log(err);\n  const portal = new MagicPortal(self);\n\n  // Initialize isomorphic-git\n  const fs = BrowserFS.BFSRequire('fs');\n  portal.set('fs', fs);\n  portal.set('pfs', pify(fs));\n\n  // Initialize isomorphic-git with our new file system\n  git.plugins.set('fs', fs);\n\n  let emitter = await portal.get('emitter');\n  git.plugins.set('emitter', emitter);\n\n  let credentialManager = await portal.get('credentialManager');\n  git.plugins.set('credentialManager', credentialManager);\n\n  fs.getRootFS().empty(() => {\n    fs.mkdir('/', () => {\n      portal.set('git', git);\n    });\n  });\n});\n\nself.addEventListener('message', ({ data }) => console.log(data));\n"]}