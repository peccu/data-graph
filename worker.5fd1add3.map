{"version":3,"sources":["js/worker.js"],"names":["importScripts","fsOptions","fs","options","BrowserFS","configure","err","console","log","portal","MagicPortal","self","BFSRequire","set","pify","git","plugins","get","emitter","credentialManager","getRootFS","empty","mkdir","addEventListener","data"],"mappings":";;;;;;;;;;AAoCA,aAAA,IAAA,EAAA,EAAA,QAAA,+BAAA,EAAA,EAAA,QAAA,4CAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GApCAA,cACE,6CACA,wCACA,mCACA,kCAEF,IAAIC,EAAY,CACdC,GAAI,YACJC,QAAS,IAGXC,UAAUC,UAAUJ,EAApB,WAAA,IAAA,GAAA,EAAA,EAAA,SAA+B,EAAA,QAAA,KAAA,SAAeK,EAAAA,GAAf,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,EAAA,QAAA,KAAA,SAAA,GAAA,OAAA,OAAA,EAAA,KAAA,EAAA,MAAA,KAAA,EACzBA,IAAAA,EADyB,CAAA,EAAA,KAAA,EAAA,MACbC,OAAAA,EAAAA,OAAAA,SAAAA,QAAQC,IAAIF,IADC,KAAA,EAYTG,OAVdA,EAAS,IAAIC,YAAYC,MAGzBT,EAAKE,UAAUQ,WAAW,MAChCH,EAAOI,IAAI,KAAMX,GACjBO,EAAOI,IAAI,MAAOC,KAAKZ,IAGvBa,IAAIC,QAAQH,IAAI,KAAMX,GAVO,EAAA,KAAA,EAYTO,EAAOQ,IAAI,WAZF,KAAA,EAeCR,OAH1BS,EAZyB,EAAA,KAa7BH,IAAIC,QAAQH,IAAI,UAAWK,GAbE,EAAA,KAAA,GAeCT,EAAOQ,IAAI,qBAfZ,KAAA,GAezBE,EAfyB,EAAA,KAgB7BJ,IAAIC,QAAQH,IAAI,oBAAqBM,GAErCjB,EAAGkB,YAAYC,MAAM,WACnBnB,EAAGoB,MAAM,IAAK,WACZb,EAAOI,IAAI,MAAOE,SApBO,KAAA,GAAA,IAAA,MAAA,OAAA,EAAA,SAAA,EAAA,SAA/B,OAAA,SAAA,GAAA,OAAA,EAAA,MAAA,KAAA,YAAA,IAyBAJ,KAAKY,iBAAiB,UAAW,SAAA,GAAGC,IAAAA,EAAAA,EAAAA,KAAWjB,OAAAA,QAAQC,IAAIgB","file":"worker.5fd1add3.map","sourceRoot":"..","sourcesContent":["importScripts(\n  'https://isomorphic-git.org/js/browserfs.js',\n  'https://isomorphic-git.org/js/pify.js',\n  'https://unpkg.com/isomorphic-git',\n  'https://unpkg.com/magic-portal'\n);\nlet fsOptions = {\n  fs: 'IndexedDB',\n  options: {}\n};\n\nBrowserFS.configure(fsOptions, async function(err) {\n  if (err) return console.log(err);\n  const portal = new MagicPortal(self);\n\n  // Initialize isomorphic-git\n  const fs = BrowserFS.BFSRequire('fs');\n  portal.set('fs', fs);\n  portal.set('pfs', pify(fs));\n\n  // Initialize isomorphic-git with our new file system\n  git.plugins.set('fs', fs);\n\n  let emitter = await portal.get('emitter');\n  git.plugins.set('emitter', emitter);\n\n  let credentialManager = await portal.get('credentialManager');\n  git.plugins.set('credentialManager', credentialManager);\n\n  fs.getRootFS().empty(() => {\n    fs.mkdir('/', () => {\n      portal.set('git', git);\n    });\n  });\n});\n\nself.addEventListener('message', ({ data }) => console.log(data));\n"]}